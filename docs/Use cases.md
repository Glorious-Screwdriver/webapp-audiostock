# Прецеденты использования

## Список акторов

### Гость

- просмотр каталога сайта
- регистрация
- авторизация

### Потребитель

- просмотр каталога сайта
- покупка треков
- подписка на авторов
- добавление трека в избранное
- пополнение счета / вывод средств

### Автор

*\*Все то же, что доступно потребителю\**

- редактирование профиля автора
- выкладывание треков

### Модератор

- Бан пользователя
- Удаление трека

## Диаграмма прецедентов использования

![Диаграма прецедентов использования](img/Use%20case%20diagram.jpg)

## Спецификации потока событий

| Прецедент | Регистрация |
| --- | --- |
| Краткое описание | *Гость* создает новую учетную запись |
| Действующие лица | *Гость* |
| Предусловия | *Гость* хочет зарегистрироваться |
| Основной поток | *Гость* заполняет регистрационную форму, указав логин и пароль |
| Альтернативные потоки | Если форма заполнена неверно или логин занят, учетная запись не создаётся, пользователь получает сообщение об ошибке |
| Постусловия | Если всё заполнено верно, создаётся новая учётная запись |

| Прецедент | Авторизация |
| --- | --- |
| Краткое описание | *Гость* входит в свою учётную запись |
| Действующие лица | *Гость* |
| Предусловия | *Гость* имеет зарегистрированную учётную запись |
| Основной поток | *Гость* вводит логин и пароль в форму |
| Альтернативные потоки | Если *гость* неверно ввел данные пользователя, или такого аккаунта нет в системе, *гость* получает сообщение об ошибке |
| Постусловия | Если введенные *гостем* данные есть в системе, он авторизуется и становится *потребителем* |

| Прецедент | Просмотр каталога |
| --- | --- |
| Краткое описание | Пользователь ознакамливается с представленными на сайте треками и авторами |
| Действующие лица | *Гость*, *потребитель*, *автор* |
| Предусловия | Пользователь желает ознакомиться с каталогом сайта |
| Основной поток | Пользователь просматривает каталог сайта. Во вкладке "треки" можно ознакомиться с представленными на сайте аудиоматериалами, во вкладке "авторы" — просмотреть профили авторов, торгующих на площадке |
| Альтернативные потоки | - |
| Постусловия | - |

| Прецедент | Бан пользователя |
| --- | --- |
| Краткое описание | *Модератор* банит аккаунт *автора* |
| Действующие лица | *Модератор* |
| Предусловия | Пользователь авторизован в аккаунте *модератора* |
| Основной поток | *Модератор* нажимает на кнопку "забанить" в профиле *автора*, помещая аккаунт в список забаненных |
| Альтернативные потоки | *Модератор* может "разбанить" автора, нажав на кнопку "разбанить" |
| Постусловия | Аккаунт пропадает из вкладки авторов на главной странице. При обращении по адресу, по которому распологался профиль *автора*, любым пользователем, кроме *модератора*, пользователь получает сообщение "страница не найдена". Треки забаненного *автора* скрываются, денежные средства замораживаются |

| Прецедент | Удаление трека |
| --- | --- |
| Краткое описание | *Модератор* удаляет трек из общего доступа |
| Действующие лица | *Модератор* |
| Предусловия | Пользователь авторизован в аккаунте *модератора* |
| Основной поток | *Модератор* нажимает на кнопку "удалить" на странице трека |
| Альтернативные потоки | - |
| Постусловия | Трек пропадает из вкладки "треки" и из профиля *автора* |

| Прецедент | Пополнение счёта |
| --- | --- |
| Краткое описание | Для покупки звуков у пользователя на счету должны быть деньги |
| Действующие лица | *Потребитель*, *автор* |
| Предусловия | Пользователь должен быть зарегестрирован |
| Основной поток | Пользователь заполняет данные карточки и отправляет запрос |
| Альтернативные потоки | Если оплата не удалась пользователь получает сообщение об ошибке |
| Постусловия | Счет пользователя пополняется на введенную сумму |

| Прецедент | Покупка треков |
| --- | --- |
| Краткое описание | У пользователей есть возможность покупать треки |
| Действующие лица | *Потребитель*, *автор* |
| Предусловия | Пользователь должен быть зарегестрирован и интересующие треки должны быть **добавлены в корзину** |
| Основной поток | Из корзины пользователь переходит  к оформлению заказа (способ оплаты, подтверждение) |
| Альтернативные потоки | Если оплата не удалась пользователь получает сообщение об ошибке |
| Постусловия | Счет автора пополняется на сумму заказа а покупателю предоставляется доступ к аудиофайлу |

| Прецедент | Становление автором |
| --- | --- |
| Краткое описание | Для того что бы начать продавать аудио пользователь должен изменить статус аккаунта на автора |
| Действующие лица | *Потребитель* |
| Предусловия | Пользователь должен быть зарегистрирован |
| Основной поток | Пользователь заполняет более подробную форму |
| Альтернативные потоки | Если форма заполнена неверно пользователь получает сообщение об ошибке  |
| Постусловия | Если все в порядке статус аккаунта меняется на авторский и ему открывается возможность выкладывать аудио на продажу |

| Прецедент | Подписка на авторов |
| --- | --- |
| Краткое описание | Если пользователю понравились работы автора он может подписаться на него |
| Действующие лица | *Потребитель* или *Автор* |
| Предусловия | Пользователь зарегестрирован |
| Основной поток | По нажатии на кнопку интересующий автор будет добавлен в список подписок |
| Альтернативные потоки | Если автор уже был добавлен пользователь отпишется от автора |
| Постусловия | Подписавшемуся пользователю будут приходить уведомления о новых работах автора, так же подписавшиийся окажется в списке подсчиков у автора |

| Прецедент | Добавление трека в избранное |
| --- | --- |
| Краткое описание | Если у пользователя нет возможности купить трек в данный момент он может добавить его в список избранного |
| Действующие лица | *Потребитель* или *Автор* |
| Предусловия | Пользователь зарегестрирован |
| Основной поток | По нажатии на кнопку интересующий трек будет добавлен в список избранного |
| Альтернативные потоки | Если автор уже был добавлен трек удалится из списка |
| Постусловия | Трек будет доступен даже после завершения сессии, у автора появится уведомление о том что его работа кому-то понравилась |

| Прецедент | Редактирование профиля |
| --- | --- |
| Краткое описание | После решгистрации можно изменять личные данные |
| Действующие лица | *Автор* или *Потребитель* |
| Предусловия | Пользователь должен быть зарегестрирован |
| Основной поток | Пользователь заполняет необходимую форму |
| Альтернативные потоки | если форма заполнена неверно пользователь получает сообщение об ошибке  |
| Постусловия | Если всё заполнено верно, информация о пользователе изменяется, приходит сообщение об успешной замене|

| Прецедент | Загрузка трека на продажу |
| --- | --- |
| Краткое описание | Автор может выложить трек выбрав обложку, описание, жанр и т.д. |
| Действующие лица | *Автор* |
| Предусловия | Пользователь должен быть зарегестрирован и иметь статус автора |
| Основной поток | Пользователь заполняет необходимые поля иотправляет трек на проверку |
| Альтернативные потоки | Если запрос не проходит по параметрам, пользователю приходит сообщение об ошибке |
| Постусловия | Если все заполнено правильно, трек размещается на площадке и появляется у пользователя в списке треков |
