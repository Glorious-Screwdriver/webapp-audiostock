# Прецеденты использования

В системе действуют следующие лица: **гость**, **потребитель**, **автор** и **модератор**. Посмотрим, какие действия им доступны.

### Гость:

- просмотр каталога сайта,
- регистрация в системе,
- авторизация.

### Потребитель:

- просмотр каталога сайта,
- покупка треков,
- подписка на авторов,
- добавление треков в избранное,
- пополнение счёта / вывод средств.

### Автор:

- редактирование профиля автора,
- загрузка треков на продажу,
- изменение информации о треках,
- удаление треков.

### Модератор:

- обработка заявок на добавление треков,
- бан пользователей,
- удаление треков.

## Диаграмма прецедентов использования

![Диаграмма прецедентов использования](img/Use%20case%20diagram.jpg)

## Спецификации потока событий

1. Спецификации прецедентов использования **гостя**:

| Прецедент | Регистрация |
| --- | --- |
| Краткое описание | *Гость* создает новую учетную запись |
| Действующие лица | *Гость* |
| Предусловия | - |
| Основной поток | *Гость* заполняет регистрационную форму, указав логин и пароль |
| Альтернативные потоки | Если форма заполнена неверно, или логин занят, учетная запись не создаётся, пользователь получает сообщение об ошибке |
| Постусловия | Если всё заполнено верно, создаётся новая учётная запись |

| Прецедент | Авторизация |
| --- | --- |
| Краткое описание | *Гость* авторизуется учётной записи |
| Действующие лица | *Гость* |
| Предусловия |- |
| Основной поток | *Гость* вводит логин и пароль в форму |
| Альтернативные потоки | Если данные пользователя введены неверно, или такого аккаунта нет в системе, *гость* получает сообщение об ошибке |
| Постусловия | Если введенные *гостем* данные есть в системе, он авторизуется и становится *потребителем* |

| Прецедент | Просмотр каталога |
| --- | --- |
| Краткое описание | Пользователь ознакамливается с представленными на сайте треками и авторами |
| Действующие лица | *Гость* или *потребитель* |
| Предусловия | - |
| Основной поток | Пользователь просматривает каталог сайта. Во вкладке "треки" можно ознакомиться с представленными на сайте аудиоматериалами, во вкладке "авторы" — просмотреть профили авторов, торгующих на площадке |
| Альтернативные потоки | - |
| Постусловия | - |

2. Спецификации прецедентов использования **потребителя**:

| Прецедент | Пополнение счёта / вывод средств |
| --- | --- |
| Краткое описание | Пользователь пополняет счёт / выводит деньги со счёта |
| Действующие лица | *Потребитель* |
| Предусловия | У пользователя заполнен платёжный адрес |
| Основной поток | Пользователь вводит данные банковской карты и отправляет запрос на пополнение / вывод средств |
| Альтернативные потоки | - Если оплата не удалась, пользователь получает сообщение об ошибке <br> - Если платёжный адрес не заполнен, происходит переадресация пользователя на форму заполнения платёжного адреса |
| Постусловия | Счёт пользователя пополняется на введённую сумму / со счёта пользователя выводится введённая сумма |

| Прецедент | Покупка треков |
| --- | --- |
| Краткое описание | Пользователь покупает трек |
| Действующие лица | *Потребитель* |
| Предусловия | - |
| Основной поток | Интересующие треки пользователь **добавляет в корзину**, после чего переходит к **оформлению заказа**. В форме он выбирает способ оплаты и вид желаемой лицензии на трек, после чего отправляет форму |
| Альтернативные потоки | Если оплата не удалась, пользователь получает сообщение об ошибке |
| Постусловия | Счёт *автора* пополняется на сумму заказа, а покупателю предоставляется доступ к скачиванию аудиофайла |

| Прецедент | Подписка на авторов |
| --- | --- |
| Краткое описание | Пользователь подписывается на автора |
| Действующие лица | *Потребитель* |
| Предусловия | - |
| Основной поток | Пользователь нажимает на кнопку "подписаться" |
| Альтернативные потоки | Если пользователь захочет отписаться от автора, кнопка "подписаться" будет заменена на "отписаться", при нажатии на которую автор пропадет из подписок |
| Постусловия | Подписавшемуся пользователю будут приходить уведомления о новых работах автора, а сам пользователь окажется в списке подписчиков автора |

| Прецедент | Добавление трека в избранное |
| --- | --- |
| Краткое описание | Пользователь добавляет трек в свой список "избранного" |
| Действующие лица | *Потребитель* |
| Предусловия | - |
| Основной поток | Пользователь нажимает на кнопку "Добавить в избранное" |
| Альтернативные потоки | Если трек уже находится в избранном, кнопка меняется на "Убрать из избранного". При нажатии трек удалится из списка |
| Постусловия | Интересующий трек добавится в список избранного пользователя, у автора появится уведомление о том что его работа кому-то понравилась |

| Прецедент | Создание профиля автора |
| --- | --- |
| Краткое описание | *Потребитель* открывает профиль автора |
| Действующие лица | *Потребитель* |
| Предусловия | - |
| Основной поток | Пользователь заполняет форму создания профиля автора |
| Альтернативные потоки | Если форма заполнена неверно, пользователь получает сообщение об ошибке |
| Постусловия | У пользователя появляется доступ к действиям *автора* |

3. Спецификации прецедентов использования **автора**:

| Прецедент | Редактирование профиля |
| --- | --- |
| Краткое описание | Пользователь редактирует свой профиль автора |
| Действующие лица | *Автор* |
| Предусловия | У пользователя должен быть создан профиль автора |
| Основной поток | Пользователь меняет данные своего профиля в специальной форме |
| Альтернативные потоки | Если форма заполнена неверно, пользователь получает сообщение об ошибке  |
| Постусловия | Информация профиле автора меняется |

| Прецедент | Загрузка трека на продажу |
| --- | --- |
| Краткое описание | Автор выкладывает трек на продажу |
| Действующие лица | *Автор* |
| Предусловия | У пользователя должен быть открыт профиль автора |
| Основной поток | *Автор*, выбрав обложку, описание, жанр и т. д., заполняет необходимые поля и отправляет трек на проверку *модераторов* |
| Альтернативные потоки | - Пользователь неверно заполнил поля, тогда он получает сообщение об ошибке <br> - *Модератор* отклонил заявку на добавление трека |
| Постусловия | Трек размещается на площадке и появляется в треках автора |

| Прецедент | Изменение или удаление трека |
| --- | --- |
| Краткое описание | *Автор* меняет информацию о треке или удаляет его с площадки |
| Действующие лица | *Автор* |
| Предусловия | - |
| Основной поток | Пользователь меняет данные о треке или заполняет специальную форму для удаления трека |
| Альтернативные потоки | - Новые данные введены некорректно, пользователь получает сообщение об ошибке, данные о треке не меняются <br> - Пользователь не подтверждает удаление трека |
| Постусловия | Данные о треке меняются или трек удаляется с площадки и из профиля автора |

4. Спецификации прецедентов использования **модератора**:

| Прецедент | Проверка трека |
| --- | --- |
| Краткое описание | *Модератор* рассматривает заявку на добавление трека *автора* на площадку |
| Действующие лица | *Модератор* |
| Предусловия | - |
| Основной поток | *Модератор* проверяет информацию о треке, прослушивает его, после чего принимает решение, добавлять трек на площадку или нет. Для этого у него есть соответствующие кнопки — "Одобрить" и "Отклонить" |
| Альтернативные потоки | - |
| Постусловия | В случае одобрения заявки, трек появляется на площадке и становится доступным для продажи, в случае отклонения — автор трека получает соответствующее уведомление |

| Прецедент | Бан пользователя |
| --- | --- |
| Краткое описание | *Модератор* банит профиль автора пользователя |
| Действующие лица | *Модератор* |
| Предусловия | - |
| Основной поток | *Модератор* нажимает на кнопку "забанить" в профиле автора пользователя, помещая профиль в список забаненных |
| Альтернативные потоки | *Модератор* может "разбанить" автора, нажав на кнопку "разбанить" |
| Постусловия | Аккаунт пропадает из вкладки авторов на главной странице. При обращении по адресу, по которому распологался профиль *автора*, любым пользователем, кроме *модератора*, пользователь получает сообщение "страница не найдена". Треки забаненного *автора* скрываются, денежные средства замораживаются |

| Прецедент | Удаление трека |
| --- | --- |
| Краткое описание | *Модератор* удаляет трек из общего доступа |
| Действующие лица | *Модератор* |
| Предусловия | - |
| Основной поток | *Модератор* нажимает на кнопку "удалить" на странице трека |
| Альтернативные потоки | - |
| Постусловия | Трек пропадает из вкладки "треки" и из профиля автора пользователя |
